\documentclass[twoside,spanish,a4paper,openright,11pt]{book}
\usepackage[spanish]{babel}
\usepackage[utf8]{inputenc}
\usepackage{graphics}
\usepackage{graphicx}
\usepackage{url}
\usepackage[T1]{fontenc}
\usepackage{fancyhdr}
\usepackage{hyperref}
\usepackage{color}
\usepackage{colortbl}
\usepackage{listings}
\usepackage{colourlist}
\usepackage{booktabs}
\usepackage{amssymb}
\usepackage[acronym, nonumberlist]{glossaries}
\usepackage[table,xcdraw]{xcolor}
\usepackage{rotating}
\usepackage{tabularx}
\usepackage[justification=centering]{caption}
\usepackage{textcomp}
\usepackage[stretch=90,shrink=10]{microtype}
\usepackage{wrapfig}
\usepackage{enumitem}
\usepackage[toc,page]{appendix}



\newcommand{\cc}{{\textquotesingle}}

\makeglossaries

%Configuración del paquete hyperref
% colores definidos
\definecolor{mygray}{rgb}{.86,.86,.86}
\definecolor{myblue}{rgb}{.20,.20,.6}
\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}
\definecolor{whitesmoke}{rgb}{0.96,0.96,0.96}

% configuración del paquete hyperref
\hypersetup{   pdfauthor = {Hristo Ivanov Ivanov}
               pdftitle = {Software empotrado de control y gestión de un monitor de neutrones},
               pdfkeywords = {NMDB, CALMA, TFC},
               pdfsubject = {Proyecto Final de Carrera},
               colorlinks={true},
               pdfstartview={FitV},
               linkcolor={myblue},
               citecolor={myblue},
               urlcolor={myblue}
}





%Nos permite definir los márgenes como queramos del documento completo
\usepackage{anysize}
\marginsize{3.5cm}{3cm}{2cm}{2cm}

%Con esta definición pordemos cambiar los márgenes sobre la marcha utilizando
% \begin{changemargin}{7cm}{0cm}
%	.. .. ..
% \end{changemargin}
\def\changemargin#1#2{\list{}{\rightmargin#2\leftmargin#1}\item[]}
\let\endchangemargin=\endlist





% Control de lneas viudas y huérfanas
\clubpenalty=100000
\widowpenalty=10000
\displaywidowpenalty=1000
\looseness=1

%-----------------------------------------------------------------------------%
%
% Formato de las cabeceras
%
\pagestyle{fancyplain}

\lhead[
        \fancyplain{}
	    {\textrm{\textbf{\thepage}\hspace{4mm}\small\leftmark}}]
        {\fancyplain{}
        {\textrm{\footnotesize\ GSO}}}
\rhead[
        \fancyplain{}
        {\textrm{\footnotesize\ Hristo Ivanov Ivanov}}]
        {\fancyplain{}
        {\textrm{\small\rightmark\hspace{4mm}\normalsize\textbf{\thepage}}}}
\cfoot[]{} % En el pie de página no ponemos nada
\renewcommand{\headrulewidth}{0.1mm}

\graphicspath{{img/}}



%Definiciónes para la representación de consola, ficheros y código
\definecolor{pythonComment}{rgb}{.5,.2,.0}
\definecolor{pythonKey}{rgb}{0,0,.5}
\definecolor{pythonKey2}{rgb}{0,.5,.2}
\definecolor{pythonString}{rgb}{.5,0,0}
\usepackage{listings}
\lstdefinestyle{myPython}{
	language	= Python,
	frame 		= lines,
	basicstyle	= \small\ttfamily,
	keywordstyle	= \color{pythonKey},
	otherkeywords	= {self, True, False},
	keywords	= [2]{True, False},
	keywordstyle	= [2]\color{pythonKey2},
	commentstyle	= \small\em \color{pythonComment},
	stringstyle	= \color{pythonString},
	showstringspaces=false,
	upquote		=true,
	literate	={á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1 {ñ}{{\'n}}1,
%
	numbers=left,
	numbersep=15pt,
	numberstyle=\tiny,
	numberfirstline = false,
	breaklines=true
}

\lstdefinestyle{myBash}{
	language	= bash,
	frame 		= lines,
	basicstyle	= \small\ttfamily,
	keywordstyle	= \color{pythonKey},
	deletekeywords	= {enable, cd},
	commentstyle	= \small\em \color{pythonComment},
	stringstyle	= \color{pythonString},
	showstringspaces= false,
	upquote		= true,
	literate	={á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1 {ñ}{{\'n}}1,
%
	breaklines=true
}

\lstdefinestyle{myFile}{
	language	= bash,
	frame 		= lines,
	basicstyle	= \small\ttfamily,
	keywordstyle	= \color{pythonKey},
	morecomment=[s][\color{pythonKey2}\small\ttfamily]{[}{]}, 
	deletekeywords	= {test},
	commentstyle	= \small\em \color{pythonComment},
	stringstyle	= \color{pythonString},
	showstringspaces= false,
	upquote		= true,
	literate	={á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1 {ñ}{{\'n}}1,
%
	numbers=left,
	numbersep=15pt,
	numberstyle=\tiny,
	numberfirstline = false,
	breaklines=true
}

\definecolor{lightgray}{rgb}{.9,.9,.9}
\definecolor{darkgray}{rgb}{.4,.4,.4}
\definecolor{purple}{rgb}{0.65, 0.12, 0.82}
\lstdefinelanguage{JavaScript}{
	keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
	ndkeywords={class, export, boolean, throw, implements, import, this},
	sensitive=false,
	comment=[l]{//},
	morecomment=[s]{/*}{*/},
	morestring=[b]',
	morestring=[b]"
}

\lstdefinestyle{myJs}{
	language	= JavaScript,
	frame 		= lines,
	basicstyle	= \small\ttfamily,
	keywordstyle	= \color{pythonKey},
	commentstyle	= \small\em \color{pythonComment},
	stringstyle	= \color{pythonString},
	showstringspaces= false,
	upquote		= true,
	literate	={á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1 {ñ}{{\'n}}1,
%
	numbers=left,
	numbersep=15pt,
	numberstyle=\tiny,
	numberfirstline = false,
	breaklines=true
}

\lstdefinestyle{myPhp}{
	language	= PHP,
	frame 		= lines,
	basicstyle	= \small\ttfamily,
	keywordstyle	= \color{pythonKey},
	otherkeywords	= {use, new, \$, this},
	commentstyle	= \small\em \color{pythonComment},
	stringstyle	= \color{pythonString},
	showstringspaces= false,
	upquote		= true,
	literate	={á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1 {ñ}{{\'n}}1,
%
	numbers=left,
	numbersep=15pt,
	numberstyle=\tiny,
	numberfirstline = false,
	breaklines=true
}

\begin{document}

\include{abreviaturas}
\include{portada}
\newpage{\pagestyle{empty}\cleardoublepage}


\pagenumbering{arabic}
\setcounter{page}{3}

\setcounter{tocdepth}{3}
\include{agradecimientos}

\tableofcontents
\newpage
\listoffigures % Índice de figuras
\newpage


\include{introduccion}
\include{entornoHW}
\include{softwareControl}
\include{backend}
\include{frontend}
\include{conclusiones}
\include{appendix}


%Incluyo la bibliografía
\addcontentsline{toc}{chapter}{Referencias bibliográficas}
%\let\antiguaLM\leftmark
%\let\antiguaRM\rightmark
%\renewcommand\leftmark{}
\nocite{*}
\bibliographystyle{plain}
\bibliography{Bibliografia}

%Acronyms
\newpage
\printglossary[type=\acronymtype]
\addcontentsline{toc}{chapter}{Acrónimos}
\end{document}
